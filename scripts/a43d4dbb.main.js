var aligments=[{id:"P37288",organism:"Human",sequence:"MRLSAGPDAGPSGNSSPWWPLATGAGNTSREAEALGEGNGPPRDVRNEELAKLEIAVLAVTFAVAVLGNSSVLLALHRTPRKTSRMHLFIRHLSLADLAVAFFQVLPQMCWDITYRFRGPDWLCRVVKHLQVFGMFASAYMLVVMTADRYIAVCHPLKTLQQPARRSRLMIAAAWVLSFVLSTPQYFVFSMIE--VNNVTKARDCWATFIQPWGSRAYVTWMTGGIFVAPVVILGTCYGFICYNIWCNVRGKTAS----RQSKGAEQAGVAFQKGFLLAPCVSSVKSISRAKIRTVKMTFVIVTAYIVCWAPFFIIQMWSVWDPMSVWTESENPTITITALLGSLNSCCNPWIYMFFSGHLLQDCVQSFPCCQNMKEKFNKEDTDSMSRRQTFYSNNRSPTNSTGMWKDSPKSSKSIKFIPVST"},{id:"P30560",organism:"Rat",sequence:"MSFPRGSQDRSVGNSSPWWPLTTEGSNGSQEAARLGEGDSPLGDVRNEELAKLEIAVLAVIFVVAVLGNSSVLLALHRTPRKTSRMHLFIRHLSLADLAVAFFQVLPQLCWDITYRFRGPDWLCRVVKHLQVFAMFASAYMLVVMTADRYIAVCHPLKTLQQPARRSRLMIATSWVLSFILSTPQYFIFSVIEIEVNNGTKTQDCWATFIQPWGTRAYVTWMTSGVFVAPVVVLGTCYGFICYHIWRNIRGKTASSRHSKGDKGSGEAVGPFHKGLLVTPCVSSVKSISRAKIRTVKMTFVIVSAYILCWAPFFIVQMWSVWDENFIWTDSENPSITITALLASLNSCCNPWIYMFFSGHLLQDCVQSFPCCHSMAQKFAKDDSDSMSRRQTSYSNNRSPTNSTGMWKDSPKSSKSIRFIPVST"},{id:"Q62463",organism:"Mouse",sequence:"MSFPRGSHDLPAGNSSPWWPLTTEGANSSREAAGLGEGGSPPGDVRNEELAKLEVTVLAVIFVVAVLGNSSVLLALHRTPRKTSRMHLFIRHLSLADLAVAFFQVLPQLCWDITYRFRGPDWLCRVVKHLQVFAMFASSYMLVVMTADRYIAVCHPLKTLQQPARRSRLMIAASWGLSFVLSIPQYFIFSVIEFEVNNGTKAQDCWATFIPPWGTRAYVTWMTSGVFVVPVIILGTCYGFICYHIWRNVRGKTAS-RQSKGGKGSGEAAGPFHKGLLVTPCVSSVKSISRAKIRTVKMTFVIVSAYILCWTPFFIVQMWSVWDTNFVWTDSENPSTTITALLASLNSCCNPWIYMFFSGHLLQDCVQSFPCCQSIAQKFAKDDSDSMSRRQTSYSNNRSPTNSTGTWKDSPKSSKSIRFIPVST"},{id:"Q9WTV8",organism:"Montane vole",sequence:"MSFPRGSYDPAASNSSPRWPLSAEDANSSREAAGHQKGSDPSGDVRNEELAKLEIAVLAVIFVVAVLGNSSVLLALHRTPRKTSRMHLFIRHLSLADLAVAFFQVLPQLCWDITYRFRGPDWLCRVVKHLQVFAMFASAYMLVVMTADRYIAVCHPLKTLQQPARRSRLMIAASWVLSFLLSTPQYFIFSMIEIEVNNGTKTQDCWATFIQPWGTRAYVTWMTSGVFVVPVVILGTCYGFICYHIWRNVRGKTAS----RQSKGSGEDVAPFHKGLLVTPCVSSVKTISRAKIRTVKMTFVIVTAYILCWAPFFIVQMWSVWDDNFIWTDSENPSITITALLASLNSCCNPWIYMFFSGHLLQDCVQSFPCCQRMVQKFTKDDSDNMSRRQTSYSNNRSPTNSTGTWKDSPKSSRSIRFIPVST"},{id:"Q9WTV9",organism:"Prairie vole",sequence:"MSFPRGSYDPAASNSSPWWPLSAEDANSSWEAAGHQKGSDPSGDVRNEELAKLEIAVLAVIFVVAVLGNSSVLLALHRTPRKTSRMHLFIRHLSLADLAVAFFQVLPQLCWDITYRFRGPDWLCRVVKHLQVFAMFASAYMLVVMTADRYIAVCHPLKTLQQPTRRSRLMIAASWVLSFLLSTPQYFIFSMIEIEVNNGTKTQDCWATFIQPWGTRAYVTWMTSGVFVVPVVILGTCYGFICYHIWRNVRGKTAS----RQSKGSGEDVAPFHKGLLVTPCVSSVKTISRAKIRTVKMTFVIVTAYILCWAPFFIVQMWSVWDDNFIWTDSENPSITITALLASLNSCCNPWIYMFFSGHLLQDCVQSFPCCQRMVQKFTKDDSDNMSRRHTSYSNNRSPTNSTGTWKDSPKSSRSIRFIPVST"},{id:"P48043",organism:"Sheep",sequence:"MRFSGSPSPGP-SNSSRWWPLDAGDANTSGDLAGLGEDGGPQADTRNEELAKLEIAVLAVIFVVAVLGNSSVLLALHRTPRKTSRMHLFIRHLSLADLAVAFFQVLPQLGWDITYRFRGPDGLCRVVKHMQVFAMFASAYMLVVMTADRYIAVCHPLKTLQQPARRSRLMIAAAWVLSFVLSTPQYFVFSMVE--VSNVTKTYDCWANFIHPWGLPAYVTWMTGSVFVAPVVILGTCYGFICYHIWRKVRGKTAGRQGG---PAEGAGESALYRGVLHARCVSSVKTISRAKIRTVKMTFVIVTAYIVCWAPFFIIQMWSAWDKNFSWVESENPATAIPALLASLNSCCNPWIYMFFSGHLLQDCAQSFPCCQNVKRTFTREGSDSMSRRQTSFTNNRSPTNSMGTWKDSPKSSKSIKFIPVST"}],akebono={G:"E3",A:"F#3",V:"G3",L:"B3",I:"C4",S:"E4",T:"F#4",C:"G4",M:"B5",P:"C5",H:"E5",R:"F#5",N:"G5",Q:"B5",E:"C6",D:"E6",F:"F#6",W:"G6",Y:"B6",K:"C7","-":"E7"},chromatic={G:"C1",A:"D1",V:"E1",L:"F1",I:"G1",S:"E4",T:"F#4",C:"G4",M:"B5",P:"C5",H:"E5",R:"F#5",N:"G5",Q:"B5",E:"C6",D:"E6",F:"F#6",W:"G6",Y:"B6",K:"C7","-":"E7"};Tone.Transport.bpm.value=65,$("#speed-k").val(Tone.Transport.bpm.value);var scale=akebono,colors=d3.scale.category20c().domain(Object.keys(scale)),GenomeSynth=function(){this.synth=new Tone.MonoSynth},synths=[],alignmentArray=[],organisms=[],filter=new Tone.Filter(370,"lowpass"),delay=new Tone.FeedbackDelay(.7,.2);filter.connect(delay);var freeverb=new Tone.JCReverb(.3);delay.connect(freeverb),freeverb.toMaster(),$.each(aligments,function(a,b){var c=new GenomeSynth;c.synth.connect(filter),synths.push(c),alignmentArray.push(b.sequence.split("")),organisms.push(b.organism)});var position=0,looper=function(a){$.each(synths,function(b,c){$("div #"+organisms[b].split(" ")[0].toLowerCase()+"-seq").text(alignmentArray[b][position]),d3.select("#"+organisms[b].split(" ")[0].toLowerCase()+"-seq").transition().duration(6e4/Tone.Transport.bpm.value).style("background-color",colors(scale[alignmentArray[b][position]])),c.synth.triggerAttackRelease(scale[alignmentArray[b][position]],"1n",a)}),position++};Tone.Transport.setInterval(looper,"4n");var playing=!0,togglePlayState=function(){playing?(Tone.Transport.stop(),$("#button").text("Play"),playing=!1):(Tone.Transport.start(),$("#button").text("Stop"),playing=!0)};$("#button").click(function(){togglePlayState()}),$(".dial").knob({min:50,max:500,width:100,change:function(a){Tone.Transport.bpm.value=a}}),Tone.Transport.start();